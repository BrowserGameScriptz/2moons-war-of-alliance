!function(e){e.fn.extend({blueberry:function(a){var t={interval:5e3,duration:500,lineheight:1,height:"auto",hoverpause:!1,pager:!0,nav:!0,keynav:!0},a=e.extend(t,a);return this.each(function(){var t=a,i=e(this);e(this).data("slideLocked",!1);var n=e(".slides li",i),d=e(".pager li",i),s=0,r=s+1,u=n.eq(s).find("img").height(),c=n.eq(s).find("img").width()/u,l=0,o=0;n.hide().eq(s).fadeIn(t.duration).addClass("active"),d.length?d.eq(s).addClass("active"):t.pager&&(i.append('<ul class="pager"></ul>'),n.each(function(a){e(".pager",i).append('<li><a href="#"><span>'+a+"</span></a></li>")}),(d=e(".pager li",i)).eq(s).addClass("active")),d&&e("a",d).click(function(){return clearTimeout(i.play),r=e(this).parent().index(),h(),!1});var h=function(){i.data("slideLocked")||(i.data("slideLocked",!0),n.eq(s).data("bb_current",s),n.eq(s).data("bb_next",r),n.eq(s).data("bb_duration",t.duration),n.eq(s).data("bb_slides",n),n.eq(s).fadeOut(t.duration,function(){e(this).data("bb_current");var a=e(this).data("bb_next"),t=e(this).data("bb_duration"),n=e(this).data("bb_slides");e(this).removeClass("active"),n.eq(a).fadeIn(t).addClass("active").queue(function(){i.data("slideLocked",!1),f(),e(this).dequeue()})}),d&&d.eq(s).removeClass("active").end().eq(r).addClass("active"),r=(s=r)>=n.length-1?0:s+1)},f=function(){i.play=setTimeout(function(){h()},t.interval)};f(),t.hoverpause&&n.hover(function(){clearTimeout(i.play)},function(){f()});var v=function(){l=e(".slides",i).width(),o=Math.floor(l/c/t.lineheight)*t.lineheight};v(),e(window).resize(function(){v()}),t.keynav&&e(document).keyup(function(e){switch(e.which){case 39:case 32:clearTimeout(i.play),h();break;case 37:clearTimeout(i.play),r=s-1,h()}})})}})}(jQuery);